TODO: make a small to generate while commands